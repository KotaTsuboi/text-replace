<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body>
    <h3>Rules</h3>
    <textarea id="rules" style="width:30%;", rows="10"></textarea>
    <h3>Input</h3>
    <textarea id="input" style="width:50%;", rows="20"></textarea>
    <h3>output</h3>
    <textarea id="output" style="width:50%;", rows="20" readonly></textarea>
</body>

<script>
    let rulesArea = document.getElementById("rules");
    let inputArea = document.getElementById("input");
    let outputArea = document.getElementById("output");

    inputArea.addEventListener("keyup", replace);
    rulesArea.addEventListener("keyup", replace);

    function replace() {
        const map = new Map();

        let rules = rulesArea.value.split("\n");

        for (let rule of rules) {
            rule = rule.trim();
            rule = rule.replaceAll(/\s+/g, " ");

            if (!rule) {
                continue
            }

            rule = rule.split(" ");

            if (rule.length > 1) {
                map.set(rule[0], rule[1])
            }
        }

        let input = inputArea.value

        for (const [key, value] of map) {
            input = input.replaceAll(key, value)
        }

        outputArea.value = input
    }
</script>
</html>
